(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e143527c"],{"071d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("span",{staticStyle:{"margin-right":"10px"}},[e._v(" 总收益： "),n("span",{staticStyle:{color:"green"}},[e._v(e._s(e.allProfit))]),e._v(" usdt ")]),e.buyAll?n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.changeBuyALL(!0)}}},[e._v(" 开启所有买单 ")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.changeBuyALL(!1)}}},[e._v(" 关闭所有买单 ")]),e.sellAll?n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.changeSellALL(!0)}}},[e._v(" 开启所有卖单 ")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.changeSellALL(!1)}}},[e._v(" 关闭所有卖单 ")]),n("el-button",{attrs:{type:"primary",size:"mini",loading:e.listLoading},on:{click:function(t){return e.fetchData()}}},[e._v(" 刷新 ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"",size:"mini","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"币种",align:"center",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.symbol)+" ")]}}])}),n("el-table-column",{attrs:{type:"expand",label:">>",align:"center",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-table",{attrs:{data:r.history_trade,border:"",fit:"",size:"mini","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"交易价格",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.price)+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"交易数量",align:"center",width:"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.quantity)+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"交易方向",align:"center",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["BUY"===r.side?n("span",{staticStyle:{color:"green"}},[e._v("买入")]):n("span",{staticStyle:{color:"red"}},[e._v("卖出")])]}}],null,!0)}),n("el-table-column",{attrs:{label:"已卖出",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[!0===r.isSell?n("span",{staticStyle:{color:"green"}},[e._v("是")]):!1===r.isSell?n("span",{staticStyle:{color:"red"}},[e._v("否 ")]):n("span",[e._v("-")])]}}],null,!0)}),n("el-table-column",{attrs:{label:"收益",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.profit?e.round(n.profit,2):"-")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"预计卖价",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.sell_price||"-")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"止损率",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s("BUY"===n.side?(n.stop_loss||0)+"%":"-")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"交易时间",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.time)+" ")]}}],null,!0)})],1)]}}])}),n("el-table-column",{attrs:{label:"交易数量",align:"center",width:"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.quantity))])]}}])}),n("el-table-column",{attrs:{label:"当前数量",align:"center",width:"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{color:"green"}},[e._v(" "+e._s(e.round(t.row.buy_quantity,4))+" ")])]}}])}),n("el-table-column",{attrs:{label:"收益率",align:"center",width:"70","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.rate)+"% ")]}}])}),n("el-table-column",{attrs:{label:"买单价",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.buy_price)+" ")]}}])}),n("el-table-column",{attrs:{label:"卖单价",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sell_price)+" ")]}}])}),n("el-table-column",{attrs:{label:"当前收益",align:"center",width:"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.nowProfit(t.row.history_trade))+" ")]}}])}),n("el-table-column",{attrs:{label:"止损率",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.stop_loss||"-")+" ")]}}])}),n("el-table-column",{attrs:{label:"买单开启",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},on:{change:function(t){return e.isChangeBuy(t,r)}},model:{value:r.buy_open,callback:function(t){e.$set(r,"buy_open",t)},expression:"row.buy_open"}})]}}])}),n("el-table-column",{attrs:{label:"卖单开启",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},on:{change:function(t){return e.isChangeSell(t,r)}},model:{value:r.sell_open,callback:function(t){e.$set(r,"sell_open",t)},expression:"row.sell_open"}})]}}])})],1)],1)},l=[],o=n("1da1"),a=(n("96cf"),n("7db0"),n("4de4"),n("a9e3"),n("d81d"),n("2465")),u=n("7909"),i={data:function(){return{list:[],listLoading:!0,timeId:null,buyAll:!0,sellAll:!0}},computed:{allProfit:function(){var e=this,t=this.list.reduce((function(t,n){return t+e.nowProfit(n.history_trade||[])}),0);return Object(u["a"])(t,2)}},created:function(){var e=this;this.fetchData(),this.timeId=setInterval((function(){return e.fetchData()}),3e5)},methods:{fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(a["a"])();case 3:n=t.sent,r=n.data,e.list=r.list,e.buyAll=!!e.list.find((function(e){return!1===e.buy_open})),e.sellAll=!!e.list.find((function(e){return!1===e.sell_open})),e.listLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},edit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(a["b"])({trades:e.list});case 3:return e.$message({message:"修改成功",type:"success"}),t.next=6,e.fetchData();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({message:"修改失败",type:"success"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},nowProfit:function(e){return Object(u["a"])(e.filter((function(e){return"SELL"===e.side})).reduce((function(e,t){return e+Number(t.profit||0)}),0),2)},nowLoss:function(e){return e.filter((function(e){return"SELL"===e.side&&!1===e.isSell}))},round:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Object(u["a"])(e,t)},isChangeBuy:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.fetchData();case 2:return l=n.list.find((function(e){return e.symbol===t.symbol})),!0===e?(l.buy_price=0,l.buy_open=!0):l.buy_open=!1,r.next=6,n.edit();case 6:case"end":return r.stop()}}),r)})))()},isChangeSell:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.fetchData();case 2:return l=n.list.find((function(e){return e.symbol===t.symbol})),l.sell_open=e,r.next=6,n.edit();case 6:case"end":return r.stop()}}),r)})))()},changeBuyALL:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm("确认要进行此操作吗？").then(Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fetchData();case 2:return t.list.map((function(t){t.buy_open=e,!0===e&&(t.buy_price=0)})),n.next=5,t.edit();case 5:case"end":return n.stop()}}),n)})))).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},changeSellALL:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm("确认要进行此操作吗？").then(Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fetchData();case 2:return t.list.map((function(t){return t.sell_open=e})),n.next=5,t.edit();case 5:case"end":return n.stop()}}),n)})))).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},getSummaries:function(e){var t=this,n=e.columns,r=e.data;return n.map((function(e,n){return 0===n?"总和":"当前收益"===e.label?r.reduce((function(e,n){return e+t.nowProfit(n.history_trade)}),0):"-"}))}}},c=i,s=n("2877"),f=Object(s["a"])(c,r,l,!1,null,null,null);t["default"]=f.exports},1:function(e,t){},2465:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return o}));var r=n("b775");function l(){return Object(r["a"])({url:"/trades",method:"get"})}function o(e){return Object(r["a"])({url:"/trades",method:"put",data:e})}}}]);